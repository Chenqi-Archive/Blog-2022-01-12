（值都是引用）（引用是对同类对象的编码（引用的相对作用范围是类型，类型则用字符串编码相区分））（编码就是数据）（引用都是值）





常量不占据存储空间，而变量为了在运行时区分它可以取到的值，需要占用存储空间进行编码。这通常可以使用enum来表达：

```c
enum bool { true, false };
```

在这个例子中，true和false都是常量类型，而bool是变量类型。一个bool类型的变量需要占用1bit空间来判断它现在是true还是false，但true或者false本身并不占用运行时空间。

C++中还有另一种写法，用空类表达常量，用union type (std::variant)表达变量：

```c++
struct true_type {};
struct false_type {};
using bool_type = std::variant<true_type, false_type>;
```

常量和空类型没有任何区别，它们运行时不显式占用存储空间，而只在编译期间发挥作用，编译后便化作程序结构的一部分。运行时所有数据都是变量。

奇怪的是，C++会为空类对象也分配至少1byte的空间，为了确保不同对象有不同的内存地址。但这其实根本没必要，常量不占据空间，因此也不应该存在地址。

<br>

除了enum类型，在大多数编程语言中还有char、int、float等值类型，它们保存的值其实就是对常量的编码，因此都会占用一定的内存空间，比如unsigned char编码了0, 1, ..., 255一共256个常量，占用8bit空间。其实unsigned char完全等价于enum { 0, 1, ..., 255 }。

一些编程语言比如C/C++中还有另一种特殊的值类型T*，它保存的值是内存地址。因为每个占据内存空间的对象都有唯一的地址，反过来根据地址可以唯一确定一个内存对象，从而这种类型又被叫做引用（指针）类型。

但所有值类型其实就是引用类型，bool编码的值就是一个引用，可以动态指向true或者false。







会占据一定的存储空间

对这些基本类型进行组合可以构造更复杂的类型，比如class Point { int x; int y; }

在C/C++中，还可以定义引用类型T*。











王垠在文章《<a href="http://www.yinwang.org/blog-cn/2016/06/08/java-value-type" _target="blank">Java 有值类型吗？</a>》中指出Java的设计中其实只有引用类型，byte、int等原始类型通常被称作值类型，是因为在实现时作了inline优化。一个int对象也完全可以用引用来维护，就像String一样，修改值其实是创建了一个新的对象，并变更引用，原来的对象会被垃圾回收掉。

对叶节点的赋值？

当然王垠主要考虑了赋值的问题。

基本类型本身就是引用，只不过引用的解析方式和正规的引用类型不同。



在源代码中，常量依然会占据空间，比如true_type需要占用9个字符，这是为什么呢？



