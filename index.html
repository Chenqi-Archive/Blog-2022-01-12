<html>
	<head>
		<link rel="icon" href="favicon.jpg" />
		<title>Chenqi's blog</title>
		<style>
			body {
				width: 98%;
				height: fit-content;
				margin: 0px auto;
				font-family: Segoe UI, DengXian;
				font-size: 18px;
				line-height: 1.6;
			}
			
			@media (min-width:850px) {
				body {
					width: 850px;
				}
			}
			
			pre {
				border: 1px solid #e7eaed;
				border-radius: 3px;
				padding: 5px 10px;
			}
			
			code {
				font-size: 0.9em;
				font-family: Consolas, monospace;
			}
			
			img {
				display: block;
				margin: auto;
			}
			
			#menu-bar {
				width: 100%;
				height: 35px;
				background-color: #d3ee90;
			}
			
			#title {
				display: block;
				text-align: center;
				padding: 3px;
			}
			
			#article-list {
				margin: 5px 0px;
			}
			
			.article-title {
				display: block;
				border: 1px solid #ddd;
				padding: 10px 10px;
				margin-bottom: -1px;
				font-family: FangSong;
				font-size: 21px;
			}
			
			a {
				text-decoration: none;
				color: #483d8b;
			}
			
			#article {
				border: 3px solid #ddd;
			    border-radius: 5px;
			    padding: 20px 50px 100px;
			    margin: 5px 0;
			}
			
			footer {
				margin: 20px 0px;
				text-align: center;
				font-size: 16px;
			}
		</style>
	</head>

	<body>
		<div id="menu-bar">
			<a id="title" href="#">Chenqi's blog</a>
		</div>
		<div id="article-list" style="display:none"></div>
		<div id="article" style="display:none" title=""></div>
		<footer>
			本站内容使用
			<a target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a>
			协议授权
		</footer>
		<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
		<script>
			obj_article_list = document.getElementById('article-list');
			obj_article = document.getElementById('article');
			req = new XMLHttpRequest();
			function load_file(file_path, on_success){
				req.onreadystatechange = function () {
					if (req.readyState == 4 /*&& req.status == 200*/) { 
						on_success(req.responseText); 
					}
				};
				req.open('GET', file_path, true);
				req.send();
			}
			function load_article_list(){
				load_file('article_list.txt', function(response){
					var article_list = response.split(/\r?\n/);
					for(let i = 0; i < article_list.length; i++){
						if(article_list[i] == '') { 
							obj_article_list.appendChild(document.createElement('br'));
						} else {
							let obj_article_title = document.createElement('a');
							obj_article_title.className = 'article-title';
							obj_article_title.href = '#'+ article_list[i];
							obj_article_title.innerText = article_list[i];
							obj_article_list.appendChild(obj_article_title);
						}
					}
				});
			}
			function load_article(article_title) {
				if(article_title == ''){
					if(obj_article_list.innerHTML == ''){
						load_article_list();
					}
					obj_article_list.style.display = 'block';
					obj_article.style.display = 'none';
					document.title = 'Chenqi\'s Blog';
				}else{
					if(obj_article.title != article_title){
						obj_article.title = article_title;
						obj_article.innerHTML = '';
						load_file('articles/' + article_title + '.md', function(response){
							obj_article.innerHTML = marked(response);
						});
					}
					obj_article_list.style.display = 'none';
					obj_article.style.display = 'block';
					document.title = article_title + ' - Chenqi\'s Blog';
				}
			}
			function on_hash_change(){
				load_article(location.hash.substring(1));
			}
			function on_load(){
				on_hash_change();
			}
			window.onhashchange = on_hash_change;
			window.onload = on_load;
			load_article_list();
		</script>
	</body>
</html>