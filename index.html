<html>

	<head>
		<link rel="icon" href="favicon.jpg" />
		<title>Chenqi's blog</title>
		<style>
			body {
				margin: 0;
			}

			#menubar {
				width: 100%;
				height: 30px;
				border: 1px;
				background-color: blueviolet;
			}

			#back {
				width: 50px;
				height: 100%;
				left: 0px;
				top: 0px;
				background-color: #dddddd;
				float: left;
			}

			#back:disabled {
				background-color: blueviolet;
			}

			#title {
				height: 100%;
				left: 50px;
				top: 0px;
			}

			@media (min-width:1000px) {
				body {
					width: 1000px;
					margin: 0 auto;
				}
			}

		</style>
	</head>

	<body>
		<div id="menubar">
			<div id="back" onclick="go_back()">
				<svg style="fill:none;stroke:black;stroke-width:1">
					<polyline points="15,5 5,15 15,25" />
					<polyline points="5,15 45,15" />
				</svg>
			</div>
			<div id="title">Chenqi's blog</div>
		</div>
		<div id="content">
			<div id="article-list">

			</div>
			<div id="article">
			</div>
		</div>
		<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
		<script>
			req = new XMLHttpRequest();
			function load_file(file_path, on_success){
				req.onreadystatechange = function () {
					if (req.readyState == 4 /*&& req.status == 200*/) { on_success(req.responseText); }
				};
				req.open('GET', file_path, true);
				req.send();
			}
			function load_article_list(){
				load_file('article list.txt', function(response){
					var article_list = document.getElementById('article-list');
					var articles = response.split('\n');
					for(var i = 0; i < articles.length; i++){
						let article = document.createElement("div");
						article.innerText = articles[i];
						article.onclick = function(){
							open_article(article.innerText);
						};
						article_list.appendChild(article);
					}
				});
			}
			function open_article(article_title) {
				load_file('articles/' + article_title + '.md', function(response){
					document.getElementById('article').innerHTML = marked(response);
				});
				is_article = true;
			}
			function go_back() {
				if(is_article){
					is_article = false;
				}
			}
			load_article_list();
			is_article = false;
		</script>
	</body>
</html>